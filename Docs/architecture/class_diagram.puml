@startuml Class Diagram
title Class Diagram - Auth + Ulogovani Home

class App {
  +resolveRoute(pathname): ReactNode
  +isLoggedIn(): boolean
  +render()
}

class DesktopGate {
  +desktopMinWidth: number
  +isDesktop(): boolean
  +render()
}

class LandingPage {
  +renderHero()
  +renderFeatureCards()
  +renderProcess()
  +renderCTA()
}

class RegistrationPage {
  +formData
  +errors
  +handleSubmit()
  +render()
}

class LoginPage {
  +formData
  +errors
  +handleSubmit()
  +render()
}

class AuthApiClient {
  +registerUser(payload)
  +loginUser(payload)
  -validateRegistrationInput(payload)
  -validateLoginInput(payload)
}

class AuthPageLayout {
  +activePath: string
  +render()
}

class PublicSidebar {
  +activePath: string
  +render()
}

class LoggedHomePage {
  +user
  +onLogout()
  +render()
}

class LoggedSidebar {
  +activePath
  +user
  +onLogout()
  +render()
}

class LoggedPlaceholderPage {
  +title
  +description
  +render()
}

class SessionStorageService {
  +saveSession(token, user)
  +getSession()
  +clearSession()
  +isAuthenticated()
}

class ExpressApp {
  +mountRoutes()
}

class AuthRoutes {
  +POST /register
  +POST /login
}

class AuthController {
  +registerController(req, res)
  +loginController(req, res)
}

class AuthService {
  +registerUser(payload)
  +loginUser(payload)
  -createAccessToken(user)
}

class AuthRepository {
  +findUserByEmail(email)
  +createUser(userData)
}

class DatabaseModule {
  +initializeDatabase()
  +getDatabase()
  +applyMigrations()
}

class SQLiteDatabase {
  +users
}

class DesktopNotice {
  +render()
}

class ThemeTokens {
  +surfaceCard
  +accentBlueDark
  +accentRed
}

App --> DesktopGate
DesktopGate --> LandingPage
DesktopGate --> RegistrationPage
DesktopGate --> LoginPage
DesktopGate --> LoggedHomePage
DesktopGate --> LoggedPlaceholderPage
DesktopGate --> DesktopNotice

LandingPage *-- PublicSidebar
RegistrationPage *-- AuthPageLayout
LoginPage *-- AuthPageLayout
AuthPageLayout *-- PublicSidebar
LoggedHomePage *-- LoggedSidebar
LoggedPlaceholderPage *-- LoggedSidebar

RegistrationPage ..> AuthApiClient
LoginPage ..> AuthApiClient
App ..> SessionStorageService
AuthApiClient ..> SessionStorageService

LandingPage ..> ThemeTokens
RegistrationPage ..> ThemeTokens
LoginPage ..> ThemeTokens
LoggedHomePage ..> ThemeTokens
LoggedPlaceholderPage ..> ThemeTokens

AuthApiClient ..> ExpressApp
ExpressApp --> AuthRoutes
AuthRoutes --> AuthController
AuthController --> AuthService
AuthService --> AuthRepository
AuthRepository --> DatabaseModule
DatabaseModule --> SQLiteDatabase
@enduml
